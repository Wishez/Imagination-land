<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Order of donuts</title>
	<link rel="stylesheet" href="style.css">
	<script>
 		function parseDonuts (donutString) {
 		 var numDonuts = parseInt(donutString);
 		 if(donutString.indexOf("dozen") != -1)
 		 	numDonuts *= 12;
 		 return numDonuts
 		}

		function updateOrder() {
			const TAXRATE = 0.0925;
			const DONUTPRICE = 0.50;
			var numCakeDonuts = 
			  parseDonuts(document.getElementById('cakedonuts').value);
			var numGlazedDonuts = 
			  parseDonuts(document.getElementById('glazeddonuts').value);
			if (isNaN(numCakeDonuts))
			  numCakeDonuts = 0;
			if (isNaN(numGlazedDonuts))
			  numGlazedDonuts = 0;
			var subTotal = (numCakeDonuts + numGlazedDonuts) * DONUTPRICE;
			var tax = subTotal * TAXRATE;
			var total = tax + subTotal;
			document.getElementById("subTotal").value = "$" + subTotal.toFixed(2);
			document.getElementById("tax").value = "$" + tax.toFixed(2);
			document.getElementById("total").value = "$" + total.toFixed(2);
		}


		function placeOrder() {
		  if (document.getElementById("name").value == "")
		  	alert("I'm sorry, but you must provide your name before submitting an order.");
		  else if (document.getElementById("pickupminutes").value == "" ||
		  	isNaN(document.getElementById("pickupminutes").value))
		  	alert("I'm sorry, but you must provide the number of minutes until pick-up" + 
		  		" before submitting an order.");
  		  form.submit();
		}

	</script>
</head>
<body>
<div class="container">
	<hgroup>	
	  <h1>duncam's just-in-time donuts</h1>
	  <h2>all dounuts 50 cents each, cake or glazed!</h2>
	</hgroup>
	<img src="" alt="donut" class="image">
	<form action="#" name="orderform" method="post">
	  <div class="input">
	  	<label>Name: <input type="text" placeholder="Your name is..." id="name" name="name" maxlength="25" autofocus required></label>
	  </div>

	  <div class="clearfix"></div>

	  <div class="input">
		<label># of cake donuts: <input name="cakedonuts" id="cakedonuts" type="text" value="0" maxlength="9" required aria-required="true" onchange="updateOrder();"></label>
	  </div>

	  <div class="clearfix"></div>

  	  <div class="input">
		<label># of glazed donuts: <input name="glazeddonuts" id="glazeddonuts" type="text" value="0" maxlength="9" required aria-required="true" onchange="updateOrder();"></label>
	  </div>

	  <div class="clearfix"></div>

	  <div class="input">
		<label>Minutes 'till pickup: <input name="pickupminutes" id="pickupminutes" value="" type="text" required aria-required="true"></label>
	  </div>

	  <div class="clearfix"></div>

	  <div class="input">
		<label>Subtotal: <input name="subTotal" id="subTotal" value="" type="text"></label>
	  </div>

	  <div class="clearfix"></div>

	  <div class="input">
	 	<label>Tax: <input name="tax" id="tax" value="" type="text"></label>
      </div>

	  <div class="clearfix"></div>

	  <div class="input">
	    <label>Total: <input name="total" id="total" value="" type="text"></label>
	  </div>

	  <div class="clearfix"></div>

	  <button type="submit" onclick="placeOrder(this.form);">Place order</button>	
	</form>
</div>
</body>
</html>