<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="cookie.js"></script>
	<script>
 	  var iRock = { 
 	  	name: "iRock",
 	  	sad: "rock-sad.png",
 	  	angry: "rock-angry.png",
 	  	happy: "rock-happy.png",
 	  	commonlyState: "rock.png",

 	  	greetUser: function () {
 	  	  if (navigator.cookieEnabled)
   	  	    user.name = readCookie("irock_username");
 	  	  if (user.name)
 	  	  	alert("Hello " + user.name + ", I missed you.");
 	  	  else
 	  		alert("Hello, I'm rock!");
 	  	}, 
 	  	rockExpressions: function(expression) {
 	  		return document.getElementById("rockImg").src = expression;
 	  	},

 	  	returnToCommonlyState: function(time) {
 	  		return setTimeout("iRock.rockExpressions(iRock.commonlyState);", time);
 	  	},
 	  	sadRock: function(time) {
 	  		return setInterval("iRock.rockExpressions(iRock.sad);", time);
 	  	}
 	  }
 	  var user = {
 	  	name: "",
	    touchRock: function() {
	     if (user.name) {
	       alert("I like the attention, " + user.name + ". Thank you.");
	     }
	     else {
	       user.name = prompt("What are you name?","");
	       iRock.rockExpressions(iRock.commonlyState);
	       if(user.name) {
	    	 alert("Nice to meet you, " + user.name + ".");
	    	 if (navigator.cookieEnabled)
	      	 	writeCookie('irock_username', user.name, 2);
	      	 else
	      	 	alert("I'm sorry, i'll forget you soon:(.");
	       }
		 }
	      iRock.rockExpressions(iRock.happy);
  		  iRock.returnToCommonlyState(5000);
	  	  setTimeout("iRock.rockExpressions(iRock.sad)", 1000 * 60);
	  	}
 	  }
  	  var flexRock = function() {
		return document.getElementById("rockImg").style.height = (document.body.clientHeight - 100) * 0.9;		
  	  } 

	</script>
	<style>
	  .container {
		margin-top: 100px;
		text-align: center;
	  }
	  #rockImg {
		cursor: pointer;
	  }
	</style>
</head>
<body onload="flexRock(); iRock.greetUser();" onresize="flexRock();">
  <div class="container">
	<img onclick="user.touchRock();" src="rock.png" alt="iRock" id="rockImg">
  </div>
</body>
</html>